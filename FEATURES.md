# 功能特性說明

## 核心功能

### 1. 智能文件處理 📄

- **多格式支援**
  - TXT (純文字)
  - PDF (可攜式文件格式)
  - DOCX (Microsoft Word)
  - MD (Markdown)

- **智能分割**
  - 自動將長文件分割成適當大小的片段
  - 保留上下文連貫性（200 字元重疊）
  - 可自訂分割大小

- **批次處理**
  - 支援單一檔案處理
  - 支援整個目錄批次處理
  - 遞迴掃描子目錄

### 2. 向量資料庫 🗄️

- **ChromaDB 整合**
  - 高效能向量儲存
  - 持久化儲存
  - 自動索引

- **OpenAI Embeddings**
  - 使用最新的 text-embedding-3-small 模型
  - 高品質語義理解
  - 多語言支援

- **相似度搜尋**
  - 語義搜尋（不只是關鍵字匹配）
  - 可調整返回結果數量
  - 支援相關度評分

### 3. AI Agent 系統 🤖

- **LangChain 框架**
  - 使用 OpenAI Functions Agent
  - 支援工具呼叫
  - 自動推理和規劃

- **對話記憶**
  - 記住對話歷史
  - 支援多輪對話
  - 可手動清除記憶

- **內建工具**
  - **知識搜尋工具**：在智識庫中搜尋相關資訊
  - **文件摘要工具**：生成主題摘要

### 4. 使用者介面 💻

- **命令列介面**
  - 簡潔直觀的指令系統
  - 即時反饋
  - 彩色輸出（使用 emoji）

- **互動模式**
  - 持續對話
  - 快速指令
  - 錯誤處理

## 技術特性

### 架構設計

- **模組化設計**
  - 清晰的職責分離
  - 易於擴展和維護
  - 可重用的組件

- **物件導向**
  - 封裝良好的類別
  - 清晰的介面
  - 易於測試

### 配置管理

- **環境變數**
  - 使用 .env 檔案
  - 敏感資訊保護
  - 靈活的配置選項

- **可自訂參數**
  - 模型選擇
  - 分割大小
  - Agent 行為
  - 詳細程度

### 錯誤處理

- **完善的異常處理**
  - 友善的錯誤訊息
  - 自動恢復
  - 詳細的日誌

## 進階功能

### 1. 程式化 API

除了命令列介面，還可以在 Python 程式中直接使用：

```python
from knowledge_base.vector_store import VectorStore
from knowledge_base.agent import KnowledgeAgent

# 初始化
vector_store = VectorStore("./data/chroma")
agent = KnowledgeAgent(vector_store)

# 查詢
answer = agent.query("你的問題")
```

### 2. 自訂工具

可以輕鬆新增自己的工具：

```python
from langchain.tools import BaseTool

class MyCustomTool(BaseTool):
    name = "my_tool"
    description = "工具描述"
    
    def _run(self, query: str) -> str:
        # 實作邏輯
        return result
```

### 3. 擴展性

- 支援新增更多文件格式
- 可以整合其他向量資料庫
- 可以使用不同的 LLM
- 可以新增更多 Agent 工具

## 效能特性

### 快取機制

- 向量資料庫持久化
- 避免重複計算嵌入向量
- 快速啟動

### 批次處理

- 高效的文件處理
- 批次向量化
- 減少 API 呼叫

### 記憶體管理

- 流式處理大文件
- 適當的分割大小
- 避免記憶體溢出

## 安全性

- API 金鑰保護（.env 檔案）
- .gitignore 防止敏感資訊洩露
- 本地資料儲存

## 未來規劃

- [ ] Web 介面
- [ ] 更多文件格式支援（Excel, PPT 等）
- [ ] 多使用者支援
- [ ] 文件版本控制
- [ ] 更多 LLM 選項（本地模型）
- [ ] 圖表和圖片理解
- [ ] 語音輸入/輸出
- [ ] 行動應用程式

## 限制

- 需要網路連線（OpenAI API）
- 需要 OpenAI API 金鑰（付費）
- 大文件處理可能較慢
- 向量資料庫大小會隨文件增加

## 最佳實踐

1. **文件組織**
   - 使用清晰的檔案命名
   - 按主題組織文件
   - 定期清理過時文件

2. **查詢技巧**
   - 使用具體的問題
   - 提供足夠的上下文
   - 利用對話記憶

3. **效能優化**
   - 適當的文件分割大小
   - 定期清理向量資料庫
   - 使用批次處理

4. **成本控制**
   - 監控 API 使用量
   - 選擇適當的模型
   - 快取常見查詢

